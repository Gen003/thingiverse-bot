import os
import telegram
import sys

print("--- [ูุณุจุงุฑ ุงูุชุดุฎูุต] ุจุฏุก ุนูููุฉ ุงููุญุต ---")

# ======================================================================
# ุงูุฎุทูุฉ 1: ูุฑุงุกุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ ูู Render
# ======================================================================
print("\n[ุงูุฎุทูุฉ 1] ุฌุงุฑู ูุฑุงุกุฉ ูุชุบูุฑุงุช ุงูุจูุฆุฉ...")
bot_token = os.environ.get('BOT_TOKEN')
channel_id = os.environ.get('CHANNEL_ID')

# ุงูุชุญูู ูู ูุฌูุฏ ุงููุชุบูุฑุงุช ูุฅููุงุก ุงูุจุฑูุงูุฌ ุฅุฐุง ูุงูุช ููููุฏุฉ
if not bot_token:
    print("[ุฎุทุฃ ูุงุฏุญ] ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุบูุฑ ุงูุจูุฆุฉ 'BOT_TOKEN'.")
    print("-> ุงูุฑุฌุงุก ุงูุชุฃูุฏ ูู ุฅุถุงูุชู ุจุดูู ุตุญูุญ ูู ูุณู Environment ุนูู Render.")
    sys.exit(1) # ุฅููุงุก ุงูููุฏ ูุน ุฑูุฒ ุฎุทุฃ

if not channel_id:
    print("[ุฎุทุฃ ูุงุฏุญ] ูู ูุชู ุงูุนุซูุฑ ุนูู ูุชุบูุฑ ุงูุจูุฆุฉ 'CHANNEL_ID'.")
    print("-> ุงูุฑุฌุงุก ุงูุชุฃูุฏ ูู ุฅุถุงูุชู ุจุดูู ุตุญูุญ ูู ูุณู Environment ุนูู Render.")
    sys.exit(1)

print("[ูุฌุงุญ] ุชู ุงูุนุซูุฑ ุนูู ูุชุบูุฑุงุช ุงูุจูุฆุฉ.")
# ูุง ูุทุจุน ูููุฉ ุงูุชููู ุฃุจุฏุงู ููุญูุงุธ ุนูู ุณุฑูุชู
print(f"-> ูุนุฑู ุงูููุงุฉ ุงูุฐู ุชู ุชุญูููู: {channel_id}")


# ======================================================================
# ุงูุฎุทูุฉ 2: ูุญุงููุฉ ุฅุฑุณุงู ุฑุณุงูุฉ ุงุฎุชุจุงุฑ
# ======================================================================
print("\n[ุงูุฎุทูุฉ 2] ุฌุงุฑู ุชููุฆุฉ ุงูุงุชุตุงู ูุน ุชููุฌุฑุงู ููุญุงููุฉ ุงูุฅุฑุณุงู...")

try:
    # ุชููุฆุฉ ุงูุจูุช
    bot = telegram.Bot(token=bot_token)
    print("[ูุนูููุฉ] ุชู ุชููุฆุฉ ุงูุจูุช ุจูุฌุงุญ.")

    # ุฅุฑุณุงู ุงูุฑุณุงูุฉ
    message_text = "๐ ุฑุณุงูุฉ ุงุฎุชุจุงุฑ ูู ูุณุจุงุฑ ุงูุชุดุฎูุต ุนูู ููุตุฉ Render. ุงูุงุชุตุงู ุงูุฃุณุงุณู ูุงุฌุญ!"
    bot.send_message(chat_id=channel_id, text=message_text)
    
    print("\n" + "="*50)
    print("--- [ูุฌุงุญ ููุงุฆู] ุชู ุฅุฑุณุงู ุฑุณุงูุฉ ุงูุงุฎุชุจุงุฑ ุจูุฌุงุญ ุฅูู ุชููุฌุฑุงู! ---")
    print("="*50)
    print("\n[ุงูุชุญููู]: ูุฐุง ูุคูุฏ ุฃู ุงูุชูููุ ูุนุฑู ุงูููุงุฉุ ูุตูุงุญูุงุช ุงูุจูุช ูููุง ุตุญูุญุฉ.")
    print("ุงููุดููุฉ ุนูู ุงูุฃุบูุจ ุชููู ูู ุงูููุฏ ุงูุฑุฆูุณู (main.py)ุ ุฑุจูุง ูู ุฌุฒุก ูุฑุงุกุฉ ุงูููุงูุน (web scraping).")

except Exception as e:
    print("\n" + "="*50)
    print("--- [ูุดู] ุญุฏุซ ุฎุทุฃ ูุงุฏุญ ุฃุซูุงุก ูุญุงููุฉ ุงูุงุชุตุงู ุฃู ุงูุฅุฑุณุงู ---")
    print("="*50)
    print(f"\n[ุฑุณุงูุฉ ุงูุฎุทุฃ ุงูููุตูุฉ]:\n{e}")
    print("\n[ุชูุตูุงุช ุจูุงุกู ุนูู ุงูุฎุทุฃ]:")
    print("1. ุฅุฐุง ูุงู ุงูุฎุทุฃ ูุญุชูู ุนูู 'Chat not found'ุ ูุงููุดููุฉ ูู 'CHANNEL_ID'. ุชุฃูุฏ ุฃูู ุตุญูุญ (ุงุณุชุฎุฏู ุงูุฑูู ุงูุณุงูุจ ูููููุงุช ุงูุฎุงุตุฉ).")
    print("2. ุฅุฐุง ูุงู ุงูุฎุทุฃ ูุญุชูู ุนูู 'Invalid token' ุฃู 'Unauthorized'ุ ูุงููุดููุฉ ูู 'BOT_TOKEN'.")
    print("3. ุฅุฐุง ูุงู ุงูุฎุทุฃ ูุชุนูู ุจุงูุตูุงุญูุงุช 'Forbidden: bot was kicked' ุฃู 'not enough rights'ุ ุชุฃูุฏ ุฃู ุงูุจูุช ูุง ูุฒุงู ูุดุฑูุงู ูู ุงูููุงุฉ.")

